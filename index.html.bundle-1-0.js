montageDefine("1855034","core/converter/date-converter",{dependencies:["../core","./converter"],factory:function(e,t){var n=(e("../core").Montage,e("./converter").Converter),i=e("./converter").Validator;(function(){var e=Date,t=e.prototype,n=e.CultureInfo,i=function(e,t){return t||(t=2),("000"+e).slice(-1*t)};t.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},t.setTimeToNow=function(){var e=new Date;return this.setHours(e.getHours()),this.setMinutes(e.getMinutes()),this.setSeconds(e.getSeconds()),this.setMilliseconds(e.getMilliseconds()),this},e.today=function(){return(new Date).clearTime()},e.compare=function(e,t){if(isNaN(e)||isNaN(t))throw Error(e+" - "+t);if(e instanceof Date&&t instanceof Date)return t>e?-1:e>t?1:0;throw new TypeError(e+" - "+t)},e.equals=function(e,t){return 0===e.compareTo(t)},e.getDayNumberFromName=function(e){for(var t=n.dayNames,i=n.abbreviatedDayNames,r=n.shortestDayNames,a=e.toLowerCase(),s=0;t.length>s;s++)if(t[s].toLowerCase()==a||i[s].toLowerCase()==a||r[s].toLowerCase()==a)return s;return-1},e.getMonthNumberFromName=function(e){for(var t=n.monthNames,i=n.abbreviatedMonthNames,r=e.toLowerCase(),a=0;t.length>a;a++)if(t[a].toLowerCase()==r||i[a].toLowerCase()==r)return a;return-1},e.isLeapYear=function(e){return 0===e%4&&0!==e%100||0===e%400},e.getDaysInMonth=function(t,n){return[31,e.isLeapYear(t)?29:28,31,30,31,30,31,31,30,31,30,31][n]},e.getTimezoneAbbreviation=function(e){for(var t=n.timezones,i=0;t.length>i;i++)if(t[i].offset===e)return t[i].name;return null},e.getTimezoneOffset=function(e){for(var t=n.timezones,i=0;t.length>i;i++)if(t[i].name===e.toUpperCase())return t[i].offset;return null},t.clone=function(){return new Date(this.getTime())},t.compareTo=function(e){return Date.compare(this,e)},t.equals=function(e){return Date.equals(this,e||new Date)},t.between=function(e,t){return this.getTime()>=e.getTime()&&this.getTime()<=t.getTime()},t.isAfter=function(e){return 1===this.compareTo(e||new Date)},t.isBefore=function(e){return-1===this.compareTo(e||new Date)},t.isToday=t.isSameDay=function(e){return this.clone().clearTime().equals((e||new Date).clone().clearTime())},t.addMilliseconds=function(e){return this.setMilliseconds(this.getMilliseconds()+1*e),this},t.addSeconds=function(e){return this.addMilliseconds(1e3*e)},t.addMinutes=function(e){return this.addMilliseconds(6e4*e)},t.addHours=function(e){return this.addMilliseconds(36e5*e)},t.addDays=function(e){return this.setDate(this.getDate()+1*e),this},t.addWeeks=function(e){return this.addDays(7*e)},t.addMonths=function(t){var n=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+1*t),this.setDate(Math.min(n,e.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},t.addYears=function(e){return this.addMonths(12*e)},t.add=function(e){if("number"==typeof e)return this._orient=e,this;var t=e;return t.milliseconds&&this.addMilliseconds(t.milliseconds),t.seconds&&this.addSeconds(t.seconds),t.minutes&&this.addMinutes(t.minutes),t.hours&&this.addHours(t.hours),t.weeks&&this.addWeeks(t.weeks),t.months&&this.addMonths(t.months),t.years&&this.addYears(t.years),t.days&&this.addDays(t.days),this};var r,a,s;t.getWeek=function(){var e,t,n,i,o,l,c,u,h,d;return r=r?r:this.getFullYear(),a=a?a:this.getMonth()+1,s=s?s:this.getDate(),2>=a?(e=r-1,t=(0|e/4)-(0|e/100)+(0|e/400),n=(0|(e-1)/4)-(0|(e-1)/100)+(0|(e-1)/400),h=t-n,o=0,l=s-1+31*(a-1)):(e=r,t=(0|e/4)-(0|e/100)+(0|e/400),n=(0|(e-1)/4)-(0|(e-1)/100)+(0|(e-1)/400),h=t-n,o=h+1,l=s+(153*(a-3)+2)/5+58+h),c=(e+t)%7,i=(l+c-o)%7,u=0|l+3-i,d=0>u?53-(0|(c-h)/5):u>364+h?1:(0|u/7)+1,r=a=s=null,d},t.getISOWeek=function(){return r=this.getUTCFullYear(),a=this.getUTCMonth()+1,s=this.getUTCDate(),i(this.getWeek())},t.setWeek=function(e){return this.moveToDayOfWeek(1).addWeeks(e-this.getWeek())};var o=function(e,t,n,i){if(void 0===e)return!1;if("number"!=typeof e)throw new TypeError(e+" is not a Number.");if(t>e||e>n)throw new RangeError(e+" is not a valid value for "+i+".");return!0};e.validateMillisecond=function(e){return o(e,0,999,"millisecond")},e.validateSecond=function(e){return o(e,0,59,"second")},e.validateMinute=function(e){return o(e,0,59,"minute")},e.validateHour=function(e){return o(e,0,23,"hour")},e.validateDay=function(t,n,i){return o(t,1,e.getDaysInMonth(n,i),"day")},e.validateMonth=function(e){return o(e,0,11,"month")},e.validateYear=function(e){return o(e,0,9999,"year")},t.set=function(t){return e.validateMillisecond(t.millisecond)&&this.addMilliseconds(t.millisecond-this.getMilliseconds()),e.validateSecond(t.second)&&this.addSeconds(t.second-this.getSeconds()),e.validateMinute(t.minute)&&this.addMinutes(t.minute-this.getMinutes()),e.validateHour(t.hour)&&this.addHours(t.hour-this.getHours()),e.validateMonth(t.month)&&this.addMonths(t.month-this.getMonth()),e.validateYear(t.year)&&this.addYears(t.year-this.getFullYear()),e.validateDay(t.day,this.getFullYear(),this.getMonth())&&this.addDays(t.day-this.getDate()),t.timezone&&this.setTimezone(t.timezone),t.timezoneOffset&&this.setTimezoneOffset(t.timezoneOffset),t.week&&o(t.week,0,53,"week")&&this.setWeek(t.week),this},t.moveToFirstDayOfMonth=function(){return this.set({day:1})},t.moveToLastDayOfMonth=function(){return this.set({day:e.getDaysInMonth(this.getFullYear(),this.getMonth())})},t.moveToNthOccurrence=function(e,t){var n=0;if(t>0)n=t-1;else if(-1===t)return this.moveToLastDayOfMonth(),this.getDay()!==e&&this.moveToDayOfWeek(e,-1),this;return this.moveToFirstDayOfMonth().addDays(-1).moveToDayOfWeek(e,1).addWeeks(n)},t.moveToDayOfWeek=function(e,t){var n=(e-this.getDay()+7*(t||1))%7;return this.addDays(0===n?n+=7*(t||1):n)},t.moveToMonth=function(e,t){var n=(e-this.getMonth()+12*(t||1))%12;return this.addMonths(0===n?n+=12*(t||1):n)},t.getOrdinalNumber=function(){return Math.ceil((this.clone().clearTime()-new Date(this.getFullYear(),0,1))/864e5)+1},t.getTimezone=function(){return e.getTimezoneAbbreviation(this.getUTCOffset())},t.setTimezoneOffset=function(e){var t=this.getTimezoneOffset(),n=-6*Number(e)/10;return this.addMinutes(n-t)},t.setTimezone=function(t){return this.setTimezoneOffset(e.getTimezoneOffset(t))},t.hasDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!==Date.today().set({month:6,day:1}).getTimezoneOffset()},t.isDaylightSavingTime=function(){return Date.today().set({month:0,day:1}).getTimezoneOffset()!=this.getTimezoneOffset()},t.getUTCOffset=function(){var e,t=-10*this.getTimezoneOffset()/6;return 0>t?(e=""+(t-1e4),e.charAt(0)+e.substr(2)):(e=""+(t+1e4),"+"+e.substr(1))},t.getElapsed=function(e){return(e||new Date)-this},t.toISOString||(t.toISOString=function(){function e(e){return 10>e?"0"+e:e}return'"'+this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+'Z"'}),t._toString=t.toString,t.toString=function(e){var t=this;if(e&&1==e.length){var r=n.formatPatterns;switch(t.t=t.toString,e){case"d":return t.t(r.shortDate);case"D":return t.t(r.longDate);case"F":return t.t(r.fullDateTime);case"m":return t.t(r.monthDay);case"r":return t.t(r.rfc1123);case"s":return t.t(r.sortableDateTime);case"t":return t.t(r.shortTime);case"T":return t.t(r.longTime);case"u":return t.t(r.universalSortableDateTime);case"y":return t.t(r.yearMonth)}}var a=function(e){switch(1*e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return e?e.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(e){if("\\"===e.charAt(0))return e.replace("\\","");switch(t.h=t.getHours,e){case"hh":return i(13>t.h()?0===t.h()?12:t.h():t.h()-12);case"h":return 13>t.h()?0===t.h()?12:t.h():t.h()-12;case"HH":return i(t.h());case"H":return t.h();case"mm":return i(t.getMinutes());case"m":return t.getMinutes();case"ss":return i(t.getSeconds());case"s":return t.getSeconds();case"yyyy":return i(t.getFullYear(),4);case"yy":return i(t.getFullYear());case"dddd":return n.dayNames[t.getDay()];case"ddd":return n.abbreviatedDayNames[t.getDay()];case"dd":return i(t.getDate());case"d":return t.getDate();case"MMMM":return n.monthNames[t.getMonth()];case"MMM":return n.abbreviatedMonthNames[t.getMonth()];case"MM":return i(t.getMonth()+1);case"M":return t.getMonth()+1;case"t":return 12>t.h()?n.amDesignator.substring(0,1):n.pmDesignator.substring(0,1);case"tt":return 12>t.h()?n.amDesignator:n.pmDesignator;case"S":return a(t.getDate());default:return e}}):this._toString()}})(),function(){Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|aft(er)?|from|hence)/i,subtract:/^(\-|bef(ore)?|ago)/i,yesterday:/^yes(terday)?/i,today:/^t(od(ay)?)?/i,tomorrow:/^tom(orrow)?/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^mn|min(ute)?s?/i,hour:/^h(our)?s?/i,week:/^w(eek)?s?/i,month:/^m(onth)?s?/i,day:/^d(ay)?s?/i,year:/^y(ear)?s?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt|utc)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a(?!u|p)|p)/i},timezones:[{name:"UTC",offset:"-000"},{name:"GMT",offset:"-000"},{name:"EST",offset:"-0500"},{name:"EDT",offset:"-0400"},{name:"CST",offset:"-0600"},{name:"CDT",offset:"-0500"},{name:"MST",offset:"-0700"},{name:"MDT",offset:"-0600"},{name:"PST",offset:"-0800"},{name:"PDT",offset:"-0700"}]};var e=function(e,t){return t||(t=2),("000"+e).slice(-1*t)};Date.prototype.format=function(t){var n=this;if(t&&1==t.length){var i=Date.CultureInfo.formatPatterns;switch(n.t=n.format,t){case"c":return n.toISOString();case"d":return n.t(i.shortDate);case"D":return n.t(i.longDate);case"F":return n.t(i.fullDateTime);case"m":return n.t(i.monthDay);case"r":return n.t(i.rfc1123);case"s":return n.t(i.sortableDateTime);case"t":return n.t(i.shortTime);case"T":return n.t(i.longTime);case"u":return n.t(i.universalSortableDateTime);case"y":return n.t(i.yearMonth)}}var r=function(e){switch(1*e){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}};return t?t.replace(/(\\)?(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|S)/g,function(t){if("\\"===t.charAt(0))return t.replace("\\","");switch(n.h=n.getHours,t){case"hh":return e(13>n.h()?0===n.h()?12:n.h():n.h()-12);case"h":return 13>n.h()?0===n.h()?12:n.h():n.h()-12;case"HH":return e(n.h());case"H":return n.h();case"mm":return e(n.getMinutes());case"m":return n.getMinutes();case"ss":return e(n.getSeconds());case"s":return n.getSeconds();case"yyyy":return e(n.getFullYear(),4);case"yy":return e(n.getFullYear());case"dddd":return Date.CultureInfo.dayNames[n.getDay()];case"ddd":return Date.CultureInfo.abbreviatedDayNames[n.getDay()];case"dd":return e(n.getDate());case"d":return n.getDate();case"MMMM":return Date.CultureInfo.monthNames[n.getMonth()];case"MMM":return Date.CultureInfo.abbreviatedMonthNames[n.getMonth()];case"MM":return e(n.getMonth()+1);case"M":return n.getMonth()+1;case"t":return 12>n.h()?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return 12>n.h()?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"S":return r(n.getDate());default:return t}}):""+this},Date.Parsing={Exception:function(e){this.message="Parse error at '"+e.substring(0,10)+" ...'"}};for(var t=Date.Parsing,n=t.Operators={rtoken:function(e){return function(n){var i=n.match(e);if(i)return[i[0],n.substring(i[0].length)];throw new t.Exception(n)}},token:function(){return function(e){return n.rtoken(RegExp("^s*"+e+"s*"))(e)}},stoken:function(e){return n.rtoken(RegExp("^"+e))},until:function(e){return function(t){for(var n=[],i=null;t.length;){try{i=e.call(this,t)}catch(r){n.push(i[0]),t=i[1];continue}break}return[n,t]}},many:function(e){return function(t){for(var n=[],i=null;t.length;){try{i=e.call(this,t)}catch(r){return[n,t]}n.push(i[0]),t=i[1]}return[n,t]}},optional:function(e){return function(t){var n=null;try{n=e.call(this,t)}catch(i){return[null,t]}return[n[0],n[1]]}},not:function(e){return function(n){try{e.call(this,n)}catch(i){return[null,n]}throw new t.Exception(n)}},ignore:function(e){return e?function(t){var n=null;return n=e.call(this,t),[null,n[1]]}:null},product:function(){for(var e=arguments[0],t=Array.prototype.slice.call(arguments,1),i=[],r=0;e.length>r;r++)i.push(n.each(e[r],t));return i},cache:function(e){var n={},i=null;return function(r){try{i=n[r]=n[r]||e.call(this,r)}catch(a){i=n[r]=a}if(i instanceof t.Exception)throw i;return i}},any:function(){var e=arguments;return function(n){for(var i=null,r=0;e.length>r;r++)if(null!=e[r]){try{i=e[r].call(this,n)}catch(a){i=null}if(i)return i}throw new t.Exception(n)}},each:function(){var e=arguments;return function(n){for(var i=[],r=null,a=0;e.length>a;a++)if(null!=e[a]){try{r=e[a].call(this,n)}catch(s){throw new t.Exception(n)}i.push(r[0]),n=r[1]}return[i,n]}},all:function(){var e=arguments,t=t;return t.each(t.optional(e))},sequence:function(e,i,r){return i=i||n.rtoken(/^\s*/),r=r||null,1==e.length?e[0]:function(n){for(var a=null,s=null,o=[],l=0;e.length>l;l++){try{a=e[l].call(this,n)}catch(c){break}o.push(a[0]);try{s=i.call(this,a[1])}catch(u){s=null;break}n=s[1]}if(!a)throw new t.Exception(n);if(s)throw new t.Exception(s[1]);if(r)try{a=r.call(this,a[1])}catch(h){throw new t.Exception(a[1])}return[o,a?a[1]:n]}},between:function(e,t,i){i=i||e;var r=n.each(n.ignore(e),t,n.ignore(i));return function(e){var t=r.call(this,e);return[[t[0][0],t[0][2]],t[1]]}},list:function(e,t,i){return t=t||n.rtoken(/^\s*/),i=i||null,e instanceof Array?n.each(n.product(e.slice(0,-1),n.ignore(t)),e.slice(-1),n.ignore(i)):n.each(n.many(n.each(e,n.ignore(t))),e,n.ignore(i))},set:function(e,i,r){return i=i||n.rtoken(/^\s*/),r=r||null,function(a){for(var s=null,o=null,l=null,c=null,u=[[],a],h=!1,d=0;e.length>d;d++){l=null,o=null,s=null,h=1==e.length;try{s=e[d].call(this,a)}catch(p){continue}if(c=[[s[0]],s[1]],s[1].length>0&&!h)try{l=i.call(this,s[1])}catch(f){h=!0}else h=!0;if(h||0!==l[1].length||(h=!0),!h){for(var m=[],g=0;e.length>g;g++)d!=g&&m.push(e[g]);o=n.set(m,i).call(this,l[1]),o[0].length>0&&(c[0]=c[0].concat(o[0]),c[1]=o[1])}if(c[1].length<u[1].length&&(u=c),0===u[1].length)break}if(0===u[0].length)return u;if(r){try{l=r.call(this,u[1])}catch(v){throw new t.Exception(u[1])}u[1]=l[1]}return u}},forward:function(e,t){return function(n){return e[t].call(this,n)}},replace:function(e,t){return function(n){var i=e.call(this,n);return[t,i[1]]}},process:function(e,t){return function(n){var i=e.call(this,n);return[t.call(this,i[0]),i[1]]}},min:function(e,n){return function(i){var r=n.call(this,i);if(e>r[0].length)throw new t.Exception(i);return r}}},i=function(e){return function(){var t=null,n=[];if(arguments.length>1?t=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(t=arguments[0]),!t)return e.apply(null,arguments);for(var i=0,r=t.shift();r.length>i;i++)return t.unshift(r[i]),n.push(e.apply(null,t)),t.shift(),n}},r="optional not ignore cache".split(/\s/),a=0;r.length>a;a++)n[r[a]]=i(n[r[a]]);for(var s=function(e){return function(){return arguments[0]instanceof Array?e.apply(null,arguments[0]):e.apply(null,arguments)}},o="each any all".split(/\s/),l=0;o.length>l;l++)n[o[l]]=s(n[o[l]])}(),function(){var e=Date,t=(e.prototype,e.CultureInfo),n=function(e){for(var t=[],i=0;e.length>i;i++)e[i]instanceof Array?t=t.concat(n(e[i])):e[i]&&t.push(e[i]);return t};e.Grammar={},e.Translator={hour:function(e){return function(){this.hour=Number(e)}},minute:function(e){return function(){this.minute=Number(e)}},second:function(e){return function(){this.second=Number(e)}},meridian:function(e){return function(){this.meridian=e.slice(0,1).toLowerCase()}},timezone:function(e){return function(){var t=e.replace(/[^\d\+\-]/g,"");t.length?this.timezoneOffset=Number(t):this.timezone=e.toLowerCase()}},day:function(e){var t=e[0];return function(){this.day=Number(t.match(/\d+/)[0])}},month:function(e){return function(){this.month=3==e.length?"jan feb mar apr may jun jul aug sep oct nov dec".indexOf(e)/4:Number(e)-1}},year:function(e){return function(){var n=Number(e);this.year=e.length>2?n:n+(t.twoDigitYearMax>n+2e3?2e3:1900)}},rday:function(e){return function(){switch(e){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(t){t=t instanceof Array?t:[t];for(var n=0;t.length>n;n++)t[n]&&t[n].call(this);var i=new Date;if(!this.hour&&!this.minute||this.month||this.year||this.day||(this.day=i.getDate()),this.year||(this.year=i.getFullYear()),this.month||0===this.month||(this.month=i.getMonth()),this.day||(this.day=1),this.hour||(this.hour=0),this.minute||(this.minute=0),this.second||(this.second=0),this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.day>e.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(t){if(t=t instanceof Array?n(t):[t],0===t.length)return null;for(var i=0;t.length>i;i++)"function"==typeof t[i]&&t[i].call(this);var r=e.today();if(this.now&&!this.unit&&!this.operator)return new Date;this.now&&(r=new Date);var a,s,o,l=!!(this.days&&null!==this.days||this.orient||this.operator);if(o="past"==this.orient||"subtract"==this.operator?-1:1,this.now||-1=="hour minute second".indexOf(this.unit)||r.setTimeToNow(),(this.month||0===this.month)&&-1!="year day hour minute second".indexOf(this.unit)&&(this.value=this.month+1,this.month=null,l=!0),!l&&this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),this.month||(this.month=c.getMonth()),this.year=c.getFullYear()}if(l&&this.weekday&&"month"!=this.unit&&(this.unit="day",a=e.getDayNumberFromName(this.weekday)-r.getDay(),s=7,this.days=a?(a+o*s)%s:o*s),this.month&&"day"==this.unit&&this.operator&&(this.value=this.month+1,this.month=null),null!=this.value&&null!=this.month&&null!=this.year&&(this.day=1*this.value),this.month&&!this.day&&this.value&&(r.set({day:1*this.value}),l||(this.day=1*this.value)),this.month||!this.value||"month"!=this.unit||this.now||(this.month=this.value,l=!0),l&&(this.month||0===this.month)&&"year"!=this.unit&&(this.unit="month",a=this.month-r.getMonth(),s=12,this.months=a?(a+o*s)%s:o*s,this.month=null),this.unit||(this.unit="day"),!this.value&&this.operator&&null!==this.operator&&this[this.unit+"s"]&&null!==this[this.unit+"s"]?this[this.unit+"s"]=this[this.unit+"s"]+("add"==this.operator?1:-1)+(this.value||0)*o:(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),this[this.unit+"s"]=this.value*o),this.meridian&&this.hour&&("p"==this.meridian&&12>this.hour?this.hour=this.hour+12:"a"==this.meridian&&12==this.hour&&(this.hour=0)),this.weekday&&!this.day&&!this.days){var c=Date[this.weekday]();this.day=c.getDate(),c.getMonth()!==r.getMonth()&&(this.month=c.getMonth())}return!this.month&&0!==this.month||this.day||(this.day=1),this.orient||this.operator||"week"!=this.unit||!this.value||this.day||this.month?(l&&this.timezone&&this.day&&this.days&&(this.day=this.days),l?r.add(this):r.set(this)):Date.today().setWeek(this.value)}};var i,r=e.Parsing.Operators,a=e.Grammar,s=e.Translator;a.datePartDelimiter=r.rtoken(/^([\s\-\.\,\/\x27]+)/),a.timePartDelimiter=r.stoken(":"),a.whiteSpace=r.rtoken(/^\s*/),a.generalDelimiter=r.rtoken(/^(([\s\,]|at|@|on)+)/);var o={};a.ctoken=function(e){var n=o[e];if(!n){for(var i=t.regexPatterns,a=e.split(/\s+/),s=[],l=0;a.length>l;l++)s.push(r.replace(r.rtoken(i[a[l]]),a[l]));n=o[e]=r.any.apply(null,s)}return n},a.ctoken2=function(e){return r.rtoken(t.regexPatterns[e])},a.h=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),s.hour)),a.hh=r.cache(r.process(r.rtoken(/^(0[0-9]|1[0-2])/),s.hour)),a.H=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),s.hour)),a.HH=r.cache(r.process(r.rtoken(/^([0-1][0-9]|2[0-3])/),s.hour)),a.m=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),s.minute)),a.mm=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),s.minute)),a.s=r.cache(r.process(r.rtoken(/^([0-5][0-9]|[0-9])/),s.second)),a.ss=r.cache(r.process(r.rtoken(/^[0-5][0-9]/),s.second)),a.hms=r.cache(r.sequence([a.H,a.m,a.s],a.timePartDelimiter)),a.t=r.cache(r.process(a.ctoken2("shortMeridian"),s.meridian)),a.tt=r.cache(r.process(a.ctoken2("longMeridian"),s.meridian)),a.z=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),s.timezone)),a.zz=r.cache(r.process(r.rtoken(/^((\+|\-)\s*\d\d\d\d)|((\+|\-)\d\d\:?\d\d)/),s.timezone)),a.zzz=r.cache(r.process(a.ctoken2("timezone"),s.timezone)),a.timeSuffix=r.each(r.ignore(a.whiteSpace),r.set([a.tt,a.zzz])),a.time=r.each(r.optional(r.ignore(r.stoken("T"))),a.hms,a.timeSuffix),a.d=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1]|\d)/),r.optional(a.ctoken2("ordinalSuffix"))),s.day)),a.dd=r.cache(r.process(r.each(r.rtoken(/^([0-2]\d|3[0-1])/),r.optional(a.ctoken2("ordinalSuffix"))),s.day)),a.ddd=a.dddd=r.cache(r.process(a.ctoken("sun mon tue wed thu fri sat"),function(e){return function(){this.weekday=e}})),a.M=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d|\d)/),s.month)),a.MM=r.cache(r.process(r.rtoken(/^(1[0-2]|0\d)/),s.month)),a.MMM=a.MMMM=r.cache(r.process(a.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),s.month)),a.y=r.cache(r.process(r.rtoken(/^(\d\d?)/),s.year)),a.yy=r.cache(r.process(r.rtoken(/^(\d\d)/),s.year)),a.yyy=r.cache(r.process(r.rtoken(/^(\d\d?\d?\d?)/),s.year)),a.yyyy=r.cache(r.process(r.rtoken(/^(\d\d\d\d)/),s.year)),i=function(){return r.each(r.any.apply(null,arguments),r.not(a.ctoken2("timeContext")))},a.day=i(a.d,a.dd),a.month=i(a.M,a.MMM),a.year=i(a.yyyy,a.yy),a.orientation=r.process(a.ctoken("past future"),function(e){return function(){this.orient=e}}),a.operator=r.process(a.ctoken("add subtract"),function(e){return function(){this.operator=e}}),a.rday=r.process(a.ctoken("yesterday tomorrow today now"),s.rday),a.unit=r.process(a.ctoken("second minute hour day week month year"),function(e){return function(){this.unit=e}}),a.value=r.process(r.rtoken(/^\d\d?(st|nd|rd|th)?/),function(e){return function(){this.value=e.replace(/\D/g,"")}}),a.expression=r.set([a.rday,a.operator,a.value,a.unit,a.orientation,a.ddd,a.MMM]),i=function(){return r.set(arguments,a.datePartDelimiter)},a.mdy=i(a.ddd,a.month,a.day,a.year),a.ymd=i(a.ddd,a.year,a.month,a.day),a.dmy=i(a.ddd,a.day,a.month,a.year),a.date=function(e){return(a[t.dateElementOrder]||a.mdy).call(this,e)},a.format=r.process(r.many(r.any(r.process(r.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(t){if(a[t])return a[t];throw e.Parsing.Exception(t)}),r.process(r.rtoken(/^[^dMyhHmstz]+/),function(e){return r.ignore(r.stoken(e))}))),function(e){return r.process(r.each.apply(null,e),s.finishExact)});var l={},c=function(e){return l[e]=l[e]||a.format(e)[0]};a.formats=function(e){if(e instanceof Array){for(var t=[],n=0;e.length>n;n++)t.push(c(e[n]));return r.any.apply(null,t)}return c(e)},a._formats=a.formats(['"yyyy-MM-ddTHH:mm:ssZ"',"yyyy-MM-ddTHH:mm:ssZ","yyyy-MM-ddTHH:mm:ssz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mmZ","yyyy-MM-ddTHH:mmz","yyyy-MM-ddTHH:mm","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","MMddyyyy","ddMMyyyy","Mddyyyy","ddMyyyy","Mdyyyy","dMyyyy","yyyy","Mdyy","dMyy","d"]),a._start=r.process(r.set([a.date,a.time,a.expression],a.generalDelimiter,a.whiteSpace),s.finish),a.start=function(e){try{var t=a._formats.call({},e);if(0===t[1].length)return t}catch(n){}return a._start.call({},e)},e._parse=e.parse,e.parse=function(t){var n=null;if(!t)return null;if(t instanceof Date)return t;try{n=e.Grammar.start.call({},t.replace(/^\s*(\S*(\s+\S+)*)\s*$/,"$1"))}catch(i){return null}return 0===n[1].length?n[0]:null},e.getParseFunction=function(t){var n=e.Grammar.formats(t);return function(e){var t=null;try{t=n.call({},e)}catch(i){return null}return 0===t[1].length?t[0]:null}},e.parseExact=function(t,n){return e.getParseFunction(n)(t)}}();var r="[object Date]",a=Object.prototype.toString,s=function(e){return a.call(e)===r},o=function(e,t){var n;return n="string"==typeof e?new Date(Date.parse(e)):"number"==typeof e?new Date(e):e,s(n)?n.format(t):e},l=t.DateValidator=i.specialize({pattern:{value:"MM/dd/yyyy"},validate:{value:function(e){var t=Date.parseExact(e,this.pattern);return isNaN(t)||null==t?{message:"Unable to parse date - "+e+" in the format - "+this.pattern}:new Date(t)}}});t.DateConverter=n.specialize({allowPartialConversion:{value:!1},validator:{value:new l},pattern:{value:"MM/dd/yyyy"},convert:{value:function(e){var t=typeof e;return s(e)||"string"===t||"number"===t?o(e,this.pattern):e}},revert:{value:function(e){if(s(e))return e;this.validator.pattern=this.pattern;var t=this.validator.validate(e);if(s(t))return t;throw Error(t.message)}}})}}),montageDefine("1855034","ui/repetition.reel/repetition",{dependencies:["../../core/core","../component","../../core/template","../../core/range-controller","../../core/promise","../../core/browser","../../composer/press-composer","collections/map","collections/set","../../core/deprecate","../../core/logger","frb/observers"],factory:function(e,t){var n=e("../../core/core").Montage,i=e("../component").Component;e("../../core/template").Template;var r=e("../../core/range-controller").RangeController,a=e("../../core/promise").Promise;e("../../core/browser").browser;var s=e("../../composer/press-composer").PressComposer,o=e("collections/map"),l=e("collections/set"),c=e("../../core/deprecate").deprecationWarning,u=e("../../core/logger").logger("repetition").color.magenta(),h=e("frb/observers"),d=h.observeProperty,p=h.observeKey,f=60,m=t.Iteration=n.specialize({repetition:{value:null},controller:{value:null},_object:{value:null},object:{get:function(){return this._object},set:function(e){var t;this._object!==e&&(this._object=e,t=-1!==this.repetition.contentController.selection.indexOf(e),this._selected!==t&&(this.selected=t))}},_fragment:{value:null},_childComponents:{value:null},index:{value:null},_drawnIndex:{value:null},active:{value:null},_noTransition:{value:null},_templateDocumentPart:{value:null},isDirty:{value:!1},_selected:{value:null},selected:{get:function(){return this._selected},set:function(e){e=!!e,this.object&&this.repetition&&this.repetition.contentController&&(e?this.repetition.contentController.selection.add(this.object):this.repetition.contentController.selection.delete(this.object)),this._selected!==e&&(this._selected=e,this.repetition._addDirtyClassListIteration(this),this.repetition.needsDraw=!0)}},constructor:{value:function m(){this.super(),u.isDebug&&u.debug("Iteration:%s create iteration %O",Object.hash(this),this),this.repetition=null,this.controller=null,this.object=null,this._fragment=null,this._childComponents=null,this.index=null,this._drawnIndex=null,this.active=!1,this.defineBinding("active",{"<->":"repetition.activeIterations.has(())"}),this._noTransition=!1,this.addOwnPropertyChangeListener("active",this),this.addOwnPropertyChangeListener("_noTransition",this),this.addPathChangeListener("index.defined() && _childComponents.defined()",this,"handleComponentModelChange"),this.cachedFirstElement=null}},_timeoutBecomeActiveID:{value:null},_shouldBecomeActive:{value:!1},shouldBecomeActive:{set:function(e){if(this._timeoutBecomeActiveID&&(clearTimeout(this._timeoutBecomeActiveID),this._timeoutBecomeActiveID=null),e){var t=this;this._shouldBecomeActive=!0,this._timeoutBecomeActiveID=setTimeout(function(){t._shouldBecomeActive&&(t.active=!0),t._shouldBecomeActive=!1},f)}else this._shouldBecomeActive=!1},get:function(){return this._shouldBecomeActive}},initWithRepetition:{value:function(e){return this.repetition=e,this}},recycle:{value:function(){this.index=null,this.object=null,this._noTransition=!0}},injectIntoDocument:{value:function(e){null!==this._drawnIndex?(u.isDebug&&u.debug("Iteration:%s retracting from index %s and injecting at %s",Object.hash(this),this._drawnIndex,e),this.retractFromDocument()):u.isDebug&&u.debug("Iteration:%s injecting at index %s",Object.hash(this),e);var t=this,n=this.repetition,i=n.element,r=n._boundaries,a=i.ownerDocument.createTextNode(""),s=r[e];if(r.splice(e,0,a),i.insertBefore(a,s),i.insertBefore(this._fragment,s),n._drawnIterations.splice(e,0,this),n._updateDrawnIndexes(e),n._addDirtyClassListIteration(this),!this._elementsWillBeAddedToMap){var o=this._childComponents.length,l=function(e){e.target.removeEventListener("firstDraw",l,!1),o--,o||t.forEachElement(function(e){n._iterationForElement.set(e,t)})};if(this._childComponents.length>0)for(var c=0;this._childComponents.length>c;c++){var h=this._childComponents[c];h.addEventListener("firstDraw",l,!1),h.needsDraw=!0,h._completedFirstDraw===!0&&console.error("Repetiton:%s child component %O has already drawn.",Object.hash(this),h)}else this.forEachElement(function(e){n._iterationForElement.set(e,t)});this._elementsWillBeAddedToMap=!0}}},_elementsWillBeAddedToMap:{value:!1},retractFromDocument:{value:function(){u.isDebug&&u.debug("Iteration:%s retractFromDocument drawnIndex: %s",Object.hash(this),this._drawnIndex);var e=this._drawnIndex,t=this.repetition,n=t.element,i=t._boundaries[e],r=t._boundaries[e+1];t._boundaries.splice(e,1);for(var a=this._fragment,s=i.nextSibling;s!=r;){var o=s.nextSibling;n.removeChild(s),a.appendChild(s),s=o}n.removeChild(i),this._drawnIndex=null,t._drawnIterations.splice(e,1),t._updateDrawnIndexes(e)}},handleComponentModelChange:{value:function(e){e?this._childComponents.forEach(this.repetition.addChildComponent,this.repetition):this._childComponents&&this._childComponents.forEach(this.repetition.removeChildComponent,this.repetition)}},handlePropertyChange:{value:function(){this.repetition&&(this.repetition._addDirtyClassListIteration(this),this.repetition.needsDraw=!0)}},forEachElement:{value:function(e,t){var n=this.repetition,i=this._drawnIndex;if(null!=i)for(var r=n._boundaries[i];r!==n._boundaries[i+1];r=r.nextSibling)1===r.nodeType&&e.call(t,r)}},firstElement:{get:function(){var e=this.repetition,t=this._drawnIndex;if(null!=t)for(var n=e._boundaries[t];n!==e._boundaries[t+1];n=n.nextSibling)if(1===n.nodeType)return this.cachedFirstElement=n,n}},isComponentTreeLoaded:{value:function(){return null!==this._fragment}},cachedFirstElement:{value:null}});t.Repetition=i.specialize({initWithContent:{value:function(e){return this.object=e,this
}},initWithContentController:{value:function(e){return this.contentController=e,this}},content:{get:function(){return this.contentController?this.contentController.content:null},set:function(e){this.contentController=(new r).initWithContent(e)}},contentController:{value:null},isSelectionEnabled:{value:null},selectedIterations:{value:null},selectedIndexes:{value:null},activeIterations:{value:null},iterations:{value:null},currentIteration:{value:null},objectAtCurrentIteration:{value:null},hasTemplate:{value:!1},_iterationTemplate:{value:null},clonesChildComponents:{value:!0},__pressComposer:{value:null},_pressComposer:{get:function(){return this.__pressComposer||(this.__pressComposer=new s,this.__pressComposer.lazyLoad=!0,this.addComposerForElement(this.__pressComposer,this.element)),this.__pressComposer}},_cancelSelectionRangeChangeListener:{value:null},_selection:{value:null},selection:{get:function(){return this._selection},set:function(e){this.contentController?(this.contentController.selection!==e&&(this.contentController.selection=e),this._selection!==this.contentController.selection&&(this._selection=this.contentController.selection),this._cancelSelectionRangeChangeListener&&this._cancelSelectionRangeChangeListener(),e?(this._cancelSelectionRangeChangeListener=this.contentController.selection.addRangeChangeListener(this,"selection"),this.handleSelectionRangeChange(e,[])):this._cancelSelectionRangeChangeListener=null):this._selection=e}},handleSelectionRangeChange:{value:function(e,t){var n,i,r,a,s,l,c=this.iterations.length;if(1>=e.length&&1>=t.length){if(t.length)for(r=t[0],s=0;c>s;s++)this.iterations[s].object===r&&(this.iterations[s].selected=!1);if(e.length)for(r=e[0],s=0;c>s;s++)this.iterations[s].object===r&&(this.iterations[s].selected=!0)}else{for(n=new o,s=0;c>s;s++)a=this.iterations[s],r=a.object,(i=n.get(r))||(i=[],n.set(r,i)),i.push(a);for(s=0;t.length>s;s++)if(i=n.get(t[s]))for(l=0;i.length>l;l++)i[l].selected=!1;for(s=0;e.length>s;s++)if(i=n.get(e[s]))for(l=0;i.length>l;l++)i[l].selected=!0}}},_visibleIndexes:{value:null},visibleIndexes:{get:function(){return this._visibleIndexes},set:function(e){this._visibleIndexes!==e&&(this._visibleIndexes&&this._visibleIndexes.removeRangeChangeListener&&this._visibleIndexes.removeRangeChangeListener(this,"visibleIndexes"),this._visibleIndexes=e,this._visibleIndexes&&this._visibleIndexes.addRangeChangeListener&&this._visibleIndexes.addRangeChangeListener(this,"visibleIndexes"),this._updateOrganizedContent())}},handleVisibleIndexesRangeChange:{value:function(e,t,n){var i,r;if(this.__controllerOrganizedContent){for(i=[],r=0;e.length>r;r++)i.push(this.__controllerOrganizedContent[e[r]]);this.organizedContent.swap(n,t.length,i),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(i.length,t.length,n),this.needsDraw=!0)}}},__controllerOrganizedContent:{value:null},_controllerOrganizedContent:{get:function(){return this.__controllerOrganizedContent},set:function(e){this.__controllerOrganizedContent!==e&&(this.__controllerOrganizedContent&&this.__controllerOrganizedContent.removeRangeChangeListener&&this.__controllerOrganizedContent.removeRangeChangeListener(this,"controllerOrganizedContent"),this.__controllerOrganizedContent=e,this.__controllerOrganizedContent&&this.__controllerOrganizedContent.addRangeChangeListener&&this.__controllerOrganizedContent.addRangeChangeListener(this,"controllerOrganizedContent"),this._updateOrganizedContent())}},handleControllerOrganizedContentRangeChange:{value:function(e,t,n){this._visibleIndexes?this._updateOrganizedContent():(this.organizedContent.swap(n,t.length,e),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(e.length,t.length,n),this.needsDraw=!0))}},_updateOrganizedContent:{value:function(){var e,t;if(this.__controllerOrganizedContent)if(this._visibleIndexes){for(this.organizedContent.length>this._visibleIndexes.length&&(this.organizedContent.length=this._visibleIndexes.length,this._isListeningToOrganizedContentChanges&&this.handleOrganizedContentRangeChange(0,this.organizedContent.length-this._visibleIndexes.length,this._visibleIndexes.length)),e=this.organizedContent.length,t=0;this._visibleIndexes.length>t;t++)this.organizedContent[t]!==this.__controllerOrganizedContent[this._visibleIndexes[t]]&&(this.organizedContent[t]=this.__controllerOrganizedContent[this._visibleIndexes[t]],this._isListeningToOrganizedContentChanges&&this.handleOrganizedContentRangeChange(1,e>t?1:0,t));this._isListeningToOrganizedContentChanges&&(this.needsDraw=!0)}else e=this.organizedContent.length,this.organizedContent.swap(0,e,this.__controllerOrganizedContent),this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(this.__controllerOrganizedContent.length,e,0),this.needsDraw=!0);else e=this.organizedContent.length,this.organizedContent=[],this._isListeningToOrganizedContentChanges&&(this.handleOrganizedContentRangeChange(0,e,0),this.needsDraw=!0)}},constructor:{value:function(){this.super(),this.contentController=null,this.organizedContent=[],this.defineBinding("_controllerOrganizedContent",{"<-":"contentController.organizedContent"}),this.isSelectionEnabled=!1,this.defineBinding("selection",{"<-":"contentController.selection"}),this.defineBinding("selectedIterations",{"<-":"iterations.filter{selected}"}),this.defineBinding("selectedIndexes",{"<-":"selectedIterations.map{index}"}),this._iterationTemplate=null,this.addPathChangeListener(this._setupRequirements,this,"_handleSetupRequirementsChange"),this.addPathChangeListener("innerTemplate",this,"_handleInnerTemplateChange"),this.iterations=[],this._drawnIterations=[],this._freeIterations=[],this._contentForIteration=o(),this._iterationForElement=o(),this.currentIteration=null,this._templateId=null,this._iterationCreationPromise=a.resolve(),this._boundaries=[],this._dirtyClassListIterations=l(),this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._initialContentDrawn=!1,this.addOwnPropertyChangeListener("isSelectionEnabled",this),this._selectionPointer=null,this.activeIterations=[]}},_setupRequirements:{value:"[!_iterationTemplate.defined(),!_newDomContent.defined(),!_shouldClearDomContentOnNextDraw,_isComponentExpanded,_ownerDocumentPart.defined()].every{}"},_handleSetupRequirementsChange:{value:function(e){e&&this._setupIterationTemplate()}},_handleInnerTemplateChange:{value:function(e){this._iterationTemplate&&this._teardownIterationTemplate(),e&&this.getPath(this._setupRequirements)&&this._setupIterationTemplate()}},cleanupDeletedComponentTree:{value:function(e){var t=this._innerTemplate;this._innerTemplate=null,t&&this._teardownIterationTemplate(),e&&this.cancelBindings()}},expandComponent:{value:function(){return this._isComponentExpanded=!0,a.resolve()}},_buildIterationTemplate:{value:function(){var e,t,i,r;return e=this.innerTemplate.clone(),t=e.getSerialization(),i=t.getSerializationObject(),r=n.getInfoForObject(this).label,this._iterationLabel=r+":iteration",i[this._iterationLabel]={},e.setObjects(i),this.innerTemplate.hasParameters()&&this._expandIterationTemplateParameters(e),window._montage_le_flag&&(e.refresher=this,this._leTagIterationTemplate(e)),e}},_rebuildIterationTemplate:{value:function(){var e,t=this._iterationTemplate,n=this.iterations;this._purgeFreeIterations();for(var i,r=0;i=n[r];r++)i.isDirty=!0;this._innerTemplate=null,e=this._buildIterationTemplate(),t.replaceContentsWithTemplate(e)}},refreshTemplate:{value:function(){this._rebuildIterationTemplate()}},_isListeningToOrganizedContentChanges:{value:!1},_setupIterationTemplate:{value:function(){this._iterationTemplate=this._buildIterationTemplate();for(var e,t=this.childComponents,n=t.length-1;e=t[n--];)e.detachFromParentComponent(),e.needsDraw=!1,e.cleanupDeletedComponentTree(!0);this.handleOrganizedContentRangeChange(this.organizedContent.length,0,0),this._isListeningToOrganizedContentChanges=!0,this._canDrawInitialContent=!0,this.needsDraw=!0}},_leTagIterationTemplate:{value:function(e){var t=e.document.body;if(t.children.length>0){var n=this.ownerComponent._montage_metadata.moduleId,i=this._montage_metadata.label;this._leTagStarArgument(n,i,t)}}},_teardownIterationTemplate:{value:function(){this._isListeningToOrganizedContentChanges=!1,this.handleOrganizedContentRangeChange(0,this.organizedContent.length,0),this._purgeFreeIterations(),this._iterationTemplate=null,this._contentForIteration.clear(),this._iterationForElement.clear(),this.currentIteration=null,this._templateId=null,this._requestedIterations=0,this._createdIterations=0,this._canDrawInitialContent=!1,this._selectionPointer=null,this.activeIterations.clear(),this._dirtyClassListIterations.clear()}},_purgeFreeIterations:{value:function(){for(var e=0;this._freeIterations.length>e;e++)for(var t=this._freeIterations[e],n=0;t._childComponents.length>n;n++){var i=t._childComponents[n];this.removeChildComponent(i),i.cleanupDeletedComponentTree(!0)}this._freeIterations.clear()}},_expandIterationTemplateParameters:{value:function(e){for(var t,n,i,r,a,s,o,l,c,u=this;e.hasParameters();){u=u.ownerComponent,t=u._ownerDocumentPart.template,r=u._ownerDocumentPart.objects,s=e.expandParameters(u),i=e.getSerialization().getExternalObjectLabels(),a=e.getInstances(),l=s.labels,n=s.labelsCollisions;for(var h,d=0;h=l[d];d++)o=n&&h in n?n[h]:h,i.indexOf(o)>=0?a[o]=r[h]:(c=t.getObjectMetadata(h),c.owner||(c.owner=r.owner),e.setObjectMetadata(o,c.require,c.label,c.owner))}}},_iterationLabel:{value:null},_iterationCreationPromise:{value:null},_createIteration:{value:function(){var e=this,t=(new this.Iteration).initWithRepetition(this);return this._iterationCreationPromise=this._iterationCreationPromise.then(function(){var n,i,r=e.element.ownerDocument;return e.currentIteration=t,n=e._iterationTemplate.getInstances(),n=Object.create(n),n[e._iterationLabel]=t,i=e._iterationTemplate.instantiateWithInstances(n,r).then(function(n){n.parentDocumentPart=e._ownerDocumentPart,t._templateDocumentPart=n,n.loadComponentTree().then(function(){u.isDebug&&u.debug("Iteration:%s component tree loaded.",Object.hash(t)),t._fragment=n.fragment,t._childComponents=n.childComponents,e.constructIteration(t)}).done(),e.currentIteration=null}),i.done(),i.then(null,function(){})}),this._requestedIterations++,t}},constructIteration:{value:function(){this._createdIterations++,this._createdIterations>=this._requestedIterations&&(this.needsDraw=!0,this._canDraw=!0)}},observeProperty:{value:function(e,t,n){return"contentAtCurrentIteration"===e||"objectAtCurrentIteration"===e?("contentAtCurrentIteration"===e?c("contentAtCurrentIteration",":iteration.object"):"objectAtCurrentIteration"===e&&c("objectAtCurrentIteration",":iteration.object"),p(this._contentForIteration,this.currentIteration,t,n)):"currentIteration"===e?(c("currentIteration",":iteration"),t(this.currentIteration)):d(this,e,t,n)}},makePropertyObservable:{value:function(e){return"currentIteration"!==e?n.makePropertyObservable.call(this,e):void 0}},_controllerIterations:{value:null},_drawnIterations:{value:null},_freeIterations:{value:null},_contentForIteration:{value:null},handleOrganizedContentRangeChange:{value:function(e,t,n){var i,r,a,s,o=n,l=this.iterations,c=this._contentForIteration,h=Math.min(e,t),d=t-h,p=e-h,f=this.organizedContent;for(u.isDebug&&(u.debug("Repetition:%s content changed +%s@%s %O -%s %O ",Object.hash(this),e?e:0,n,t?t:0),u.debug("Repetition:%s +%s -%s iterations",Object.hash(this),p,d)),this._iterationTemplate.isDirty&&this._iterationTemplate.refresh(),a=0;h>a;a++,n++)l[n].object=f[n],c.set(l[n],f[n]);if(d>0)for(i=l.splice(n,d),a=0;d>a;a++)r=i[a],r.recycle(),r.isDirty||this._freeIterations.push(r);if(p>0){if(u.isDebug)var m=[];for(;p>this._freeIterations.length;)this._freeIterations.push(this._createIteration()),u.isDebug&&m.push(this._freeIterations[this._freeIterations.length-1]);var g=Array(p);for(a=h,s=0;e>a;a++,s++){var v=this._freeIterations.pop();u.isDebug&&(m.has(v)||u.debug("Repetition:%s reusing %s",Object.hash(this),Object.hash(v)));var _=f[o+a];v.object=_,c.set(v,_),g[s]=v}l.swap(n,0,g)}(d>0||p>0)&&this._updateIndexes(n)}},_updateIndexes:{value:function(e){for(var t=this.iterations;t.length>e;e++)t[e].index=e}},_addDirtyClassListIteration:{value:function(e){e.forEachElement(function(t){var n;t&&(n=t.component)?(n.classList[e.active?"add":"remove"]("active"),n.classList[e.selected?"add":"remove"]("selected"),n.classList.remove("no-transition")):this._dirtyClassListIterations.add(e)},this)}},canDraw:{value:function(){var e=this.canDrawGate.value;return e=e&&this._requestedIterations<=this._createdIterations,e=e&&(this._initialContentDrawn||this._canDrawInitialContent)}},_boundaries:{value:null},_dirtyClassListIterations:{value:null},_requestedIterations:{value:null},_createdIterations:{value:null},_canDrawInitialContent:{value:null},_initialContentDrawn:{value:null},draw:{value:function(){this._initialContentDrawn||(this._drawInitialContent(),this._initialContentDrawn=!0);for(var e=this._drawnIterations.length-1;e>=0;e--)null===this._drawnIterations[e].index&&this._drawnIterations[e].retractFromDocument();for(var e=0;this.iterations.length>e;e++){var t=this.iterations[e];t._drawnIndex!==t.index&&t.isComponentTreeLoaded()&&t.injectIntoDocument(e)}var n=this._dirtyClassListIterations.toArray();this._dirtyClassListIterations.clear(),n.forEach(function(e){e.isComponentTreeLoaded()&&e.forEachElement(function(t){t.component||(t.classList[e.active?"add":"remove"]("active"),t.classList[e.selected?"add":"remove"]("selected"),t.classList.remove("no-transition"))},this)},this)}},_drawInitialContent:{value:function(){for(var e=this.element,t=e.childNodes.length,n=0;t>n;n++)e.removeChild(e.firstChild);var i=e.ownerDocument.createTextNode("");e.appendChild(i),this._boundaries.push(i)}},_updateDrawnIndexes:{value:function(e){for(var t=this._drawnIterations;t.length>e;e++)t[e]._drawnIndex=e}},_selectionPointer:{value:null},_startX:{value:0},_startY:{value:0},_currentActiveIteration:{value:null},handleIsSelectionEnabledChange:{value:function(e){e?this._enableSelectionTracking():this._disableSelectionTracking()}},_enableSelectionTracking:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1)}},_disableSelectionTracking:{value:function(){this._pressComposer.removeEventListener("pressStart",this,!1)}},handlePressStart:{value:function(e){var t=this._findIterationContainingElement(e.targetElement);t&&(this._startX=e.clientX,this._startY=e.clientY,this.__pressComposer.addEventListener("press",this,!1),this.__pressComposer.addEventListener("pressCancel",this,!1),t.shouldBecomeActive=!0,this._currentActiveIteration=t)}},_ignoreSelection:{value:function(){this._currentActiveIteration&&(this._currentActiveIteration.shouldBecomeActive=!1,this._currentActiveIteration=null),this.activeIterations.clear(),this._startX=0,this._startY=0,this.__pressComposer.removeEventListener("press",this,!1),this.__pressComposer.removeEventListener("pressCancel",this,!1)}},handlePressCancel:{value:function(){this._ignoreSelection()}},handlePress:{value:function(e){var t=this._findIterationContainingElement(e.targetElement);t&&this._currentActiveIteration===t&&(t.active=!1,t.selected||(t.selected=!0)),this._ignoreSelection()}},_findIterationContainingElement:{value:function(e){for(var t;e;){if(e===this.element)return this._iterationForElement.get(t);t=e,e=e.parentNode}}},Iteration:{value:m,serializable:!1}})}}),montageDefine("1855034","composer/press-composer",{dependencies:["../core/core","./composer","../core/event/mutable-event"],factory:function(e,t){var n=e("../core/core").Montage,i=e("./composer").Composer,r=e("../core/event/mutable-event").MutableEvent,a=t.PressComposer=i.specialize({load:{value:function(){window.PointerEvent?this._element.addEventListener("pointerdown",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.addEventListener("MSPointerDown",this,!0):(this._element.addEventListener("touchstart",this,!0),this._element.addEventListener("mousedown",this,!0))}},unload:{value:function(){window.PointerEvent?this._element.removeEventListener("pointerdown",this,!0):window.MSPointerEvent&&window.navigator.msPointerEnabled?this._element.removeEventListener("MSPointerDown",this,!0):(this._element.removeEventListener("touchstart",this,!0),this._element.removeEventListener("mousedown",this,!0))}},delegate:{value:null},cancelPress:{value:function(){return this._state===a.PRESSED?(this._cancelPress(),!0):!1}},_cancelPress:{value:function(e){this._dispatchPressCancel(e),this._endInteraction()}},addEventListener:{value:function(e,t,n){i.addEventListener.call(this,e,t,n),"longPress"===e&&(this._shouldDispatchLongPress=!0)}},UNPRESSED:{value:0},PRESSED:{value:1},CANCELLED:{value:2},_state:{value:0},state:{get:function(){return this._state}},_shouldDispatchLongPress:{value:!1},_longPressThreshold:{value:1e3},longPressThreshold:{get:function(){return this._longPressThreshold},set:function(e){this._longPressThreshold!==e&&(this._longPressThreshold=e)}},_longPressTimeout:{value:null},_observedPointer:{value:null},_initialCenterPositionX:{value:0},_initialCenterPositionY:{value:0},_shouldSaveInitialCenterPosition:{value:!1},_endInteraction:{value:function(){this._element&&(this._removeEventListeners(),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this.component.eventManager.forfeitPointer(this._observedPointer,this),this._observedPointer=null,this._state=a.UNPRESSED,this._initialCenterPositionX=0,this._initialCenterPositionY=0,this._shouldSaveInitialCenterPosition=!1)}},_changedTouchisObserved:{value:function(e){if(null===this._observedPointer)return!1;for(var t=0,n=e.length;n>t;t++)if(e[t].identifier===this._observedPointer)return t;return!1}},surrenderPointer:{value:function(e,t){var n=this.callDelegateMethod("surrenderPointer",e,t);return void 0!==n&&n===!1?!1:(this._cancelPress(),!0)}},_shouldPerformPress:{value:function(){return!("enabled"in this.component&&!this.component.enabled||null!==this._observedPointer)}},capturePointerdown:{value:function(e){"touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH?this.captureTouchstart(e):("mouse"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE)&&this.captureMousedown(e)}},handlePointerup:{value:function(e){"touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH?this.handleTouchend(e):("mouse"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_MOUSE)&&this.handleMouseup(e)}},handlePointercancel:{value:function(e){("touch"===e.pointerType||window.MSPointerEvent&&e.pointerType===window.MSPointerEvent.MSPOINTER_TYPE_TOUCH)&&this.handleTouchcancel(e)}},captureTouchstart:{value:function(e){this._shouldPerformPress()&&(void 0!==e.pointerId?this._observedPointer=e.pointerId:e.changedTouches&&1===e.changedTouches.length&&(this._observedPointer=e.changedTouches[0].identifier),null!==this._observedPointer&&this.component.eventManager.claimPointer(this._observedPointer,this)?(this._shouldSaveInitialCenterPosition=!0,this._addEventListeners(),this._dispatchPressStart(e)):this._observedPointer=null)}},handleTouchend:{value:function(e){if(null===this._observedPointer)return this._endInteraction(e),void 0;var t;if(e.pointerId===this._observedPointer)t=e.target;else if(this._changedTouchisObserved(e.changedTouches)!==!1){var n=e.changedTouches[0];t=document.elementFromPoint(n.clientX,n.clientY)}t&&this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&(this.element===t||this.element.contains(t)?this._dispatchPress(e):this._dispatchPressCancel(e),this._endInteraction(e))}},_saveInitialCenterPositionIfNeeded:{value:function(){this._shouldSaveInitialCenterPosition&&(this._saveInitialCenterPosition(),this._shouldSaveInitialCenterPosition=!1)}},_handleMove:{value:function(e){return null===this._observedPointer?(this._endInteraction(e),void 0):(("mouse"===this._observedPointer||e.pointerId===this._observedPointer||e.changedTouches&&this._changedTouchisObserved(e.changedTouches)!==!1)&&this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&(this._saveInitialCenterPositionIfNeeded(),this._positionChanged&&this._cancelPress(e)),void 0)}},captureWheel:{value:function(e){return null===this._observedPointer?(this._endInteraction(e),void 0):((e.target===this.element||e.target===window||"function"==typeof e.target.contains&&e.target.contains(this.element)||this.element.contains(e.target))&&(this._saveInitialCenterPositionIfNeeded(),this._positionChanged&&this._cancelPress(e)),void 0)}},handleTouchcancel:{value:function(e){(null===this._observedPointer||e.pointerId===this._observedPointer||this._changedTouchisObserved(e.changedTouches)!==!1)&&(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)&&this._dispatchPressCancel(e),this._endInteraction(e))}},captureMousedown:{value:function(e){0===e.button&&this._shouldPerformPress()&&(this._observedPointer="mouse",this.component.eventManager.claimPointer(this._observedPointer,this),this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)?(this._shouldSaveInitialCenterPosition=!0,this._addEventListeners(),this._dispatchPressStart(e)):this._observedPointer=null)}},captureScroll:{value:function(e){(e.target===this.element||e.target===window||"function"==typeof e.target.contains&&e.target.contains(this.element)||this.element.contains(e.target))&&this._cancelPress(e)}},handleMouseup:{value:function(e){if(null===this._observedPointer)return this._endInteraction(e),void 0;if(this.component.eventManager.isPointerClaimedByComponent(this._observedPointer,this)){for(var t=e.target;t!==this._element&&t&&t.parentNode;)t=t.parentNode;if(t===this._element)return this._dispatchPress(e),this._endInteraction(e),void 0}this._cancelPress(e)}},handleDragstart:{value:function(e){this._cancelPress(e)}},_saveInitialCenterPosition:{value:function(){var e=this.element.getBoundingClientRect();this._initialCenterPositionX=e.left+e.width/2,this._initialCenterPositionY=e.top+e.height/2}},_positionChanged:{get:function(){var e=this.element.getBoundingClientRect(),t=e.left+e.width/2,n=e.top+e.height/2;return this._initialCenterPositionX!==t||this._initialCenterPositionY!==n}},_addEventListeners:{value:function(){window.PointerEvent?(document.addEventListener("pointerup",this,!1),document.addEventListener("pointermove",this,!1),document.addEventListener("pointercancel",this,!1)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(document.addEventListener("MSPointerUp",this,!1),document.addEventListener("MSPointerMove",this,!1),document.addEventListener("MSPointerCancel",this,!1)):"mouse"===this._observedPointer?(document.addEventListener("mouseup",this,!1),document.addEventListener("mousemove",this,!1),this._element.addEventListener("dragstart",this,!1)):(document.addEventListener("touchend",this,!1),document.addEventListener("touchcancel",this,!1),document.addEventListener("touchmove",this,!1));var e=void 0!==window.onwheel||void 0!==window.WheelEvent?"wheel":"mousewheel";document.addEventListener(e,this,!0),document.addEventListener("scroll",this,!0)}},_removeEventListeners:{value:function(){window.PointerEvent?(document.removeEventListener("pointerup",this,!1),document.removeEventListener("pointermove",this,!1),document.removeEventListener("pointercancel",this,!1)):window.MSPointerEvent&&window.navigator.msPointerEnabled?(document.removeEventListener("MSPointerUp",this,!1),document.removeEventListener("MSPointerMove",this,!1),document.removeEventListener("MSPointerCancel",this,!1)):"mouse"===this._observedPointer?(document.removeEventListener("mouseup",this,!1),document.removeEventListener("mousemove",this,!1),this._element.removeEventListener("dragstart",this,!1)):(document.removeEventListener("touchend",this,!1),document.removeEventListener("touchcancel",this,!1),document.removeEventListener("touchmove",this,!1));var e=void 0!==window.onwheel||void 0!==window.WheelEvent?"wheel":"mousewheel";document.removeEventListener(e,this,!0),document.removeEventListener("scroll",this,!0)}},_createPressEvent:{enumerable:!1,value:function(e,t){var n,i,r=t;return t||(t=document.createEvent("CustomEvent"),t.initCustomEvent(e,!0,!0,null)),n=new s,n.event=t,n.type=e,n.pointer=this._observedPointer,n.targetElement=t.target,t.changedTouches&&(i=this._changedTouchisObserved(t.changedTouches))!==!1&&(r=n.touch=t.changedTouches[i]),r&&(n.clientX=r.clientX,n.clientY=r.clientY,n.pageX=r.pageX,n.pageY=r.pageY),n}},_dispatchPressStart:{enumerable:!1,value:function(e){if(this._state=a.PRESSED,this.dispatchEvent(this._createPressEvent("pressStart",e)),this._shouldDispatchLongPress){var t=this;this._longPressTimeout=setTimeout(function(){t._dispatchLongPress()},this._longPressThreshold)}}},_dispatchPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this.dispatchEvent(this._createPressEvent("press",e)),this._state=a.UNPRESSED}},_dispatchLongPress:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(this.dispatchEvent(this._createPressEvent("longPress",e)),this._longPressTimeout=null)}},_dispatchPressCancel:{enumerable:!1,value:function(e){this._shouldDispatchLongPress&&(clearTimeout(this._longPressTimeout),this._longPressTimeout=null),this._state=a.CANCELLED,this.dispatchEvent(this._createPressEvent("pressCancel",e))}}});a.prototype.captureMSPointerDown=a.prototype.capturePointerdown,a.prototype.handleMSPointerUp=a.prototype.handlePointerup,a.prototype.handleMSPointerCancel=a.prototype.handlePointercancel,a.prototype.handleMSPointerMove=a.prototype._handleMove,a.prototype.handlePointermove=a.prototype._handleMove,a.prototype.handleTouchmove=a.prototype._handleMove,a.prototype.handleMousemove=a.prototype._handleMove,a.prototype.handleMousewheel=a.prototype.handleWheel;var s=function(){var e,t,i,a,s,o;for(e=r.specialize({type:{value:"press"},_event:{enumerable:!1,value:null},event:{get:function(){return this._event},set:function(e){this._event=e}},_touch:{enumerable:!1,value:null},touch:{get:function(){return this._touch},set:function(e){this._touch=e}}}),t=["altKey","ctrlKey","metaKey","shiftKey","cancelBubble","currentTarget","defaultPrevented","eventPhase","timeStamp","preventDefault","stopImmediatePropagation","stopPropagation"],i=["clientX","clientY","pageX","pageY","screenX","screenY","target"],a=function(e){return{get:function(){return this._event[e]}}},s=function(e){return{get:function(){return this._touch?this._touch[e]:this._event[e]}}},o=t.length-1;o>=0;o--)n.defineProperty(e,t[o],a(t[o]));for(o=i.length-1;o>=0;o--)n.defineProperty(e,i[o],s(i[o]));return e}()}}),montageDefine("579d289","ui/main.reel/main.html",{text:'<!DOCTYPE html><html><head>\n    <meta http-equiv=content-type content="text/html; charset=utf-8">\n    <title>Main</title>\n\n    <link rel=stylesheet type=text/css href=main.css>\n\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"main"},"selectedContent":0,"routable":{"@":"routableInfo"},"routableName":"main","jsonContents":[{"#":"example-content-1"},{"#":"example-content-2"},{"#":"example-content-3"}]},"bindings":{"content":{"<-":"@owner.contents[selectedContent]"},"selectedContent":{"<-":"@contentSelect.value.code"}}},"routableInfo":{"prototype":"router[Routable]","properties":{"target":{"@":"owner"}},"bindings":{"state.selectedContent":{"<->":"@owner.selectedContent"}}},"contentSelect":{"prototype":"digit/ui/select.reel","properties":{"element":{"#":"content-select"},"content":[{"label":"1st list","code":0},{"label":"2nd list","code":1},{"label":"3rd list","code":2}]},"bindings":{"contentController.selection.0":{"<-":"content[@owner.selectedContent]"}}},"list":{"prototype":"ui/list.reel","properties":{"element":{"#":"list"}},"bindings":{"content":{"<-":"@owner.content"}}},"details":{"prototype":"ui/details.reel","properties":{"element":{"#":"details"}},"bindings":{"content":{"<-":"@list.selected"}}},"montageVersion":{"prototype":"ui/version.reel","properties":{"element":{"#":"montageVersion"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=main data-montage-skin=light class=Main>\n        <select data-montage-id=content-select class="layout select">\n\n        </select>\n        <div data-montage-id=list class="layout list"></div>\n        <div data-montage-id=details class="layout details"></div>\n        <div data-montage-id=montageVersion class="layout version"></div>\n    </div>\n    <script type=text/x-vnd-data data-montage-id=example-content-1>\n[\n  {\n    "title": "No need to post any more kitten posts....this little girl wins it.",\n    "url": "http://i.imgur.com/uYqZ5wd.gifv",\n    "created": 1448446220,\n    "author": "KNIFE_OR_PENIS"\n  },\n  {\n    "title": "Isn\'t this cute?",\n    "url": "http://i.imgur.com/O7o1ugO.jpg",\n    "created": 1448429271,\n    "author": "MehakUK"\n  },\n  {\n    "title": "My University had service dogs in today. This guy mainly helps people recovering from surgeries or bereavement.",\n    "url": "http://imgur.com/nHXgZAP",\n    "created": 1448434732,\n    "author": "DylanDr"\n  },\n  {\n    "title": "Baby it\'s cold outside",\n    "url": "http://i.imgur.com/mWOnFyU.png?1",\n    "created": 1448427211,\n    "author": "CANT_TRUST_HILLARY"\n  },\n  {\n    "title": "My Meg reminds you to rescue your next best friend",\n    "url": "http://imgur.com/vQsvLoO",\n    "created": 1448426205,\n    "author": "Ryday28"\n  },\n  {\n    "title": "Multicoloured",\n    "url": "http://i.imgur.com/6vpWu90.jpg",\n    "created": 1448443263,\n    "author": "Hilltopchill"\n  },\n  {\n    "title": "My cat looks like he is about to do something diabolical",\n    "url": "http://imgur.com/gHukUK6",\n    "created": 1448452592,\n    "author": "TheGroovyGuitarDude"\n  },\n  {\n    "title": "My local humane society has a tough time getting any work done sometimes",\n    "url": "http://imgur.com/OjCH1Th",\n    "created": 1448408283,\n    "author": "grizzlyblake91"\n  },\n  {\n    "title": "We have five cats. This isn\'t one of them.",\n    "url": "http://imgur.com/00m53GM",\n    "created": 1448433206,\n    "author": "Mackscheese"\n  },\n  {\n    "title": "After being gone for a year and a half, she decided to come back home! Reddit, meet Alice.",\n    "url": "http://i.imgur.com/Z7tBvZz",\n    "created": 1448448589,\n    "author": "Bass_tapdiddle"\n  },\n  {\n    "title": "Just Thinking About You.",\n    "url": "http://i.imgur.com/XrGktIP.jpg",\n    "created": 1448405003,\n    "author": "Jessi05"\n  },\n  {\n    "title": "The new girl at school",\n    "url": "http://imgur.com/eTo94rD",\n    "created": 1448416757,\n    "author": "DocHobbes_"\n  },\n  {\n    "title": "The quick brown fox jumps over the lazy dog",\n    "url": "http://imgur.com/zWuuJ67",\n    "created": 1448402512,\n    "author": "mithurahman06"\n  },\n  {\n    "title": "I\'m a little hoarse",\n    "url": "http://i.imgur.com/J1f59F6.jpg",\n    "created": 1448412263,\n    "author": "Sorgutentarer"\n  }\n]\n    </script>\n    <script type=text/x-vnd-data data-montage-id=example-content-2>\n    [\n  {\n    "title": "This bunny enjoys eating",\n    "url": "http://gfycat.com/AdmirableReadyGalago",\n    "created": 1448442023,\n    "author": "Moh1014"\n  },\n  {\n    "title": "My cat sleeps with it\'s tongue sticking out",\n    "url": "http://imgur.com/oxf8EiA",\n    "created": 1448442632,\n    "author": "CoffeeAndCelery"\n  },\n  {\n    "title": "The Stick Is Mine.",\n    "url": "http://i.imgur.com/IEikKO4.jpg",\n    "created": 1448427783,\n    "author": "Brether"\n  },\n  {\n    "title": "We DO really have a tough time getting work done at our humane society...",\n    "url": "http://i.imgur.com/wwEVeWS.jpg",\n    "created": 1448426956,\n    "author": "Cat-a-saurus"\n  },\n  {\n    "title": "I want all the food!",\n    "url": "http://i.imgur.com/SAvtKeR.gifv",\n    "created": 1448400318,\n    "author": "Calcd_Uncertainty"\n  },\n  {\n    "title": "Charlie got a Christmas turtleneck sweater!",\n    "url": "http://imgur.com/q6HoKAf",\n    "created": 1448441082,\n    "author": "jessicamae12"\n  },\n  {\n    "title": "My dog is the dog who sits on everyone else\'s laps and checks to see if I\'m looking. Tonight, my dad\'s lap.",\n    "url": "http://imgur.com/2NsCm8B",\n    "created": 1448451146,\n    "author": "dspotato"\n  },\n  {\n    "title": "Cat in pajamas",\n    "url": "http://i.imgur.com/Rqzyvsm.jpg",\n    "created": 1448430644,\n    "author": "Hilltopchill"\n  },\n  {\n    "title": "my cat is currently sat on my knee pulling this face at me",\n    "url": "http://imgur.com/i1neKMy",\n    "created": 1448431547,\n    "author": "andrewcull"\n  },\n  {\n    "title": "This cat who will do anything for your attention",\n    "url": "http://i.imgur.com/SMFZtoC.jpg",\n    "created": 1448427552,\n    "author": "Mjavaidiqbal"\n  },\n  {\n    "title": "My Alaskan Malamute enjoying the first snow of the season.",\n    "url": "http://imgur.com/9GG9IcA",\n    "created": 1448440722,\n    "author": "Unkled75"\n  },\n  {\n    "title": "Charlie the maine coon",\n    "url": "http://imgur.com/SkN35ZU",\n    "created": 1448442864,\n    "author": "ncalo"\n  },\n  {\n    "title": "I love those breeds, but I can\'t commit to a big dog. Here is my fantasy Siberian Husky",\n    "url": "http://i.imgur.com/FNFyNRP.jpg",\n    "created": 1448439370,\n    "author": "JordanEric"\n  },\n  {\n    "title": "8 years ago today, I brought home a little gray floof. Happy Gotcha Day, Ben!",\n    "url": "http://i.imgur.com/GBnE2pk.jpg",\n    "created": 1448436392,\n    "author": "missgonzo"\n  },\n  {\n    "title": "Rescued tiger cub drinking a bottle.",\n    "url": "http://i.imgur.com/6XvEPZo.gifv",\n    "created": 1448441547,\n    "author": "loopdeloops"\n  },\n  {\n    "title": "Dogs who do not care about your personal space",\n    "url": "http://i.imgur.com/N8CO2Y4.jpg",\n    "created": 1448457895,\n    "author": "ghnl39"\n  }\n]\n    </script>\n    <script type=text/x-vnd-data data-montage-id=example-content-3>\n    [\n  {\n    "title": "\\"Ball! I thought I lost you!\\"",\n    "url": "http://i.imgur.com/bjKAQqX.gifv",\n    "created": 1448457627,\n    "author": "natsdorf"\n  },\n  {\n    "title": "Switchblade",\n    "url": "http://i.imgur.com/i8NqJPr.jpg",\n    "created": 1448420707,\n    "author": "FutureFormerRedditor"\n  },\n  {\n    "title": "Just aww",\n    "url": "http://i.imgur.com/jF456P0.gifv",\n    "created": 1448442916,\n    "author": "Hilltopchill"\n  },\n  {\n    "title": "I\'ve never seen my girlfriend move so fast in my life to take a picture.",\n    "url": "http://imgur.com/bqMDTHJ",\n    "created": 1448452043,\n    "author": "Buckiez"\n  },\n  {\n    "title": "My new roommate",\n    "url": "http://imgur.com/9BqMBrL",\n    "created": 1448453486,\n    "author": "getinthefurnace"\n  },\n  {\n    "title": "Not the hero we deserve, but the hero we need!",\n    "url": "http://i.imgur.com/lWn7RgK.gifv",\n    "created": 1448451428,\n    "author": "ghnl39"\n  },\n  {\n    "title": "First time in the snow",\n    "url": "http://i.imgur.com/uNwdDGI.jpg",\n    "created": 1448443214,\n    "author": "Hilltopchill"\n  },\n  {\n    "title": "That\'s no dog",\n    "url": "http://imgur.com/3SmKjAC",\n    "created": 1448423170,\n    "author": "schnauby30"\n  },\n  {\n    "title": "............yea......yea......yea yea yea yea yea yea yea.",\n    "url": "http://i.imgur.com/flft1Hs.gifv",\n    "created": 1448459010,\n    "author": "ghnl39"\n  },\n  {\n    "title": "I Turned 13 Weeks Old Today Hurray!",\n    "url": "http://i.imgur.com/NGR7gYS.jpg",\n    "created": 1448440464,\n    "author": "ninjatune"\n  },\n  {\n    "title": "Cuteness overload",\n    "url": "http://i.imgur.com/nAZ0D2L.jpg",\n    "created": 1448451400,\n    "author": "sabbasb"\n  },\n  {\n    "title": "Could you not",\n    "url": "http://i.imgur.com/Nv6uvWC.jpg",\n    "created": 1448372763,\n    "author": "Wyouqq"\n  },\n  {\n    "title": "The Cutest Thing I\'ve Ever Seen. Baby Jaguar Cuddling With A Baby Panther.",\n    "url": "http://i.imgur.com/6SBy6nM.jpg",\n    "created": 1448412108,\n    "author": "Rosh31"\n  },\n  {\n    "title": "My four year old rescue cat has no teeth. Occasionally she forgets to put her tongue away after washing.",\n    "url": "http://imgur.com/25Jw4B1",\n    "created": 1448378197,\n    "author": "DK359"\n  },\n  {\n    "title": "Everytime I take a bath my cat makes sure I don\'t drown and my dog makes sure no one breaks in",\n    "url": "http://imgur.com/kvXxVYQ",\n    "created": 1448450588,\n    "author": "with_an_E"\n  },\n  {\n    "title": "Siberian Banana",\n    "url": "http://i.imgur.com/6llZ66j.jpg",\n    "created": 1448363775,\n    "author": "BookerDaawitt"\n  },\n  {\n    "title": "Meet Alice!",\n    "url": "http://imgur.com/depWfJy",\n    "created": 1448462243,\n    "author": "Roseliea"\n  },\n  {\n    "title": "Sometimes I swear those eyes are almost human",\n    "url": "http://imgur.com/ZU0QwCs",\n    "created": 1448442162,\n    "author": "Delusional_unicorn"\n  },\n  {\n    "title": "Pretty sure our cat is going to disown us now.",\n    "url": "http://imgur.com/uKTSOLR",\n    "created": 1448442528,\n    "author": "thecatsmeowzer"\n  },\n  {\n    "title": "Dracula kitty",\n    "url": "http://imgur.com/Nr9csuj",\n    "created": 1448407403,\n    "author": "jgeigel"\n  }\n]\n    </script>\n\n\n</body></html>'}),montageDefine("1855034","core/range-controller",{dependencies:["./core","collections/generic-collection","collections/listen/array-changes"],factory:function(e,t){var n=e("./core").Montage,i=e("collections/generic-collection"),r=e("collections/listen/array-changes").observableArrayProperties,a=Object.freeze([]),s=function(e,t){var n=e;
return n.__proto__=s.prototype,n.rangeController=t,n.contentEquals=e&&e.contentEquals||Object.is,n};s.prototype=Object.create(Array.prototype,r),Object.defineProperty(s.prototype,"clone",{value:function(){return this.slice()}}),self.swap,Object.defineProperty(s.prototype,"oldSwap",{configurable:!1,value:r.swap.value}),Object.defineProperty(s.prototype,"swap",{configurable:!1,value:function(e,t,n){return this.swap_or_push(e,t,n)}}),s.prototype.oldPush=r.push.value,Object.defineProperty(s.prototype,"push",{configurable:!1,value:function(){for(var e=-1,t=arguments.length,n=Array(t);t>++e;)n[e]=arguments[e];this.swap_or_push(this.length,0,n)}}),Object.defineProperty(s.prototype,"swap_or_push",{configurable:!1,value:function(e,t,n){var i=this.rangeController.content;this.contentEquals=i&&i.contentEquals||Object.is,e=e>=0?e:this.length+e;var r=this.length,s=Math.min(t,r-e);if(n){n.contentEquals=this.contentEquals;var o=n.filter(function(t,r){if(i&&!i.has(t))return!1;if(n.findLast(t)>r)return!1;var a=this.find(t);return 0>a||a>=e&&e+s>a},this)}else o=a;var l;l=0===s?a:Array.prototype.slice.call(this,e,e+s);var c=o.length-l.length,u=Math.max(this.length+c,e+o.length);if(!this.rangeController.multiSelect&&u>1){var h=o.length?o[o.length-1]:this.one();return 0===r?(this.oldPush(h),a):this.oldSwap(0,r,[h])}return this.rangeController.avoidsEmptySelection&&0===u?i.has(this[0])?0===this.length-1?a:this.oldSwap(1,this.length-1):0===this.length?(this.oldPush(i.one()),a):this.oldSwap(0,this.length,[i.one()]):this.oldSwap(e,t,o)}}),t.RangeController=n.specialize({constructor:{value:function(e){this.content=null,this._selection=new s([],this),this.sortPath=null,this.filterPath=null,this.reversed=!1,this.selectAddedContent=!1,this.deselectInvisibleContent=!1,this.clearSelectionOnOrderChange=!1,this.avoidsEmptySelection=!1,this.multiSelect=!1,this.organizedContent=[],this.organizedContent.addRangeChangeListener(this,"organizedContent"),this.defineBinding("_filteredContent",{"<-":"$filterPath.defined() ? content.filter{path($filterPath)} : content"}),this.defineBinding("_sortedContent",{"<-":"$sortPath.defined() ? _filteredContent.sorted{path($sortPath)} : _filteredContent"}),this.defineBinding("organizedContent.rangeContent()",{"<-":"$reversed ?? 0 ? _sortedContent.reversed() : _sortedContent"}),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addPathChangeListener("sortPath",this,"handleOrderChange"),this.addPathChangeListener("reversed",this,"handleOrderChange"),this.addOwnPropertyChangeListener("multiSelect",this),this.iterations=[],e&&this.initWithContent(e)}},initWithContent:{value:function(e){return this.content=e,this}},sortPath:{value:null},reversed:{value:null},filterPath:{value:null},selectAddedContent:{value:!1},deselectInvisibleContent:{value:!1},clearSelectionOnOrderChange:{value:!1},avoidsEmptySelection:{value:!1},multiSelect:{value:!1},organizedContent:{value:null},iterations:{value:null},_selection:{value:null},selection:{get:function(){return this._selection},set:function(e){var t=[0,this._selection.length];e&&e.toArray&&(t=t.concat(e.toArray())),this._selection.splice.apply(this._selection,t)}},select:{value:function(e){!this.multiSelect&&this.selection.length>=1&&this.selection.clear(),this.selection.add(e)}},deselect:{value:function(e){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection["delete"](e)}},clearSelection:{value:function(){(!this.avoidsEmptySelection||this.selection.length>1)&&this.selection.clear()}},add:{value:function(e){var t;return this.content||(this.content=[]),t=this.content.add(e),t&&this.handleAdd(e),t}},push:{value:function(){for(var e=this.content.push.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},pop:{value:function(){return this.content.pop()}},shift:{value:function(){return this.content.shift()}},unshift:{value:function(){for(var e=this.content.unshift.apply(this.content,arguments),t=0;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},splice:{value:function(){for(var e=this.content.splice.apply(this.content,arguments),t=2;arguments.length>t;t++)this.handleAdd(arguments[t]);return e}},swap:{value:function(e,t,n){var i=this.content.swap.apply(this.content,arguments);if(n)for(var e=2;n.length>e;e++)this.handleAdd(n[e]);return i}},"delete":{value:function(e){return this.content["delete"](e)}},has:{value:function(e){return this.content?this.content.has(e):!1}},addEach:{value:i.prototype.addEach},deleteEach:{value:i.prototype.deleteEach},clear:{value:function(){this.content.clear()}},addContent:{value:function(){var e=new this.contentConstructor;return this.add(e),e}},_contentConstructor:{value:null},contentConstructor:{get:function(){return this._contentConstructor?this._contentConstructor:this.content&&this.content.contentConstructor?this.content.contentConstructor:Object},set:function(e){this._contentConstructor=e}},handleContentRangeChange:{value:function(e,t){if(this.selection.length>0){var n=this.content&&this.content.contentEquals||Object.is;t.deleteEach(e,n),this.selection&&this.selection.deleteEach(t)}}},handleSelectionRangeChange:{value:function(e,t){if(this.selection)if(this.content){for(var n=[],i=0;e.length>i;i++)this.content.has(e[i])||n.push(e[i]);if(this._selection.deleteEach(n),!this.multiSelect&&this._selection.length>1){var r=this._selection.pop();this._selection.clear(),this._selection.add(r)}this.avoidsEmptySelection&&0==this._selection.length&&this._selection.add(t[0])}else this._selection.clear()}},handleOrganizedContentRangeChange:{value:function(e,t){if(this.deselectInvisibleContent&&this.selection){var n=t.clone(1);n.deleteEach(e),this.selection.deleteEach(t)}}},handleOrderChange:{value:function(){this.clearSelectionOnOrderChange&&this.selection&&this.selection.clear()}},handleAdd:{value:function(e){this.selectAddedContent&&this.selection&&(!this.multiSelect&&this.selection.length>=1&&this.selection.clear(),this.selection.add(e))}},handleMultiSelectChange:{value:function(){if(this.selection){var e=this.selection.length;if(!this.multiSelect&&e>1){var t=this._selection.pop();this._selection.clear(),this._selection.add(t)}}}}},{blueprintModuleId:e("./core")._blueprintModuleIdDescriptor,blueprint:e("./core")._blueprintDescriptor})}}),montageDefine("1855034","ui/base/abstract-select",{dependencies:["./abstract-control","../../composer/press-composer","../../core/range-controller"],factory:function(e,t){var n=e("./abstract-control").AbstractControl,i=e("../../composer/press-composer").PressComposer,r=e("../../core/range-controller").RangeController,a=t.AbstractSelect=n.specialize({constructor:{value:function a(){if(this.constructor===a)throw Error("AbstractSelect cannot be instantiated.");n.constructor.call(this),this._pressComposer=new i,this.addComposer(this._pressComposer),this.contentController=new r,this.addPathChangeListener("contentController",this,"handleContentControllerChange"),this.defineBindings({content:{"<->":"contentController.content"},"contentController.multiSelect":{"<-":"multiSelect"},"classList.has('montage--disabled')":{"<-":"!enabled"},"classList.has('montage--active')":{"<-":"active"}}),this.addRangeAtPathChangeListener("content",this,"handleContentRangeChange"),this.addRangeAtPathChangeListener("values",this,"handleValuesRangeChange"),this.classList.add("matte-Select")}},enabled:{value:!0},acceptsActiveTarget:{value:!0},_pressComposer:{value:null},active:{value:!1},content:{value:null},contentController:{value:null},_labelPropertyName:{value:"label"},labelPropertyName:{set:function(e){this._labelPropertyName=e?e:"label",this._contentIsDirty=!0,this.needsDraw=!0},get:function(){return this._labelPropertyName}},_value:{value:null},value:{get:function(){return this._value},set:function(e){e!==this._value&&(this._value=e,this.values[0]!==e&&this.values.splice(0,this.values.length,e),this.needsDraw=!0)}},_values:{value:null},values:{get:function(){return this._values},set:function(e){var t=[0,this._values.length].concat(e);this._values.splice.apply(this._values,t),this.needsDraw=!0}},multiSelect:{value:!1},_contentIsDirty:{value:!0},prepareForActivationEvents:{value:function(){this._pressComposer.addEventListener("pressStart",this,!1),this._pressComposer.addEventListener("press",this,!1),this._pressComposer.addEventListener("pressCancel",this,!1)}},handlePressStart:{value:function(e){this.active=!0,e.touch&&document.addEventListener("touchmove",this,!1)}},handlePress:{value:function(){this.active=!1,this.enabled&&(this.dispatchActionEvent(),document.removeEventListener("touchmove",this,!1))}},handlePressCancel:{value:function(){this.active=!1,document.removeEventListener("touchmove",this,!1)}},handleTouchmove:{value:function(e){e.preventDefault()}},handleContentRangeChange:{value:function(){0===this.contentController.selection.length&&this.contentController.organizedContent.length>0&&this.contentController.selection.push(this.contentController.organizedContent[0]),this._contentIsDirty=!0,this.needsDraw=!0}},handleValuesRangeChange:{value:function(){this.values.length>0&&(this.value=this.values.one()),this.needsDraw=!0}},handleContentControllerChange:{value:function(e){e&&(this._values=e.selection,this.handleValuesRangeChange())}},enterDocument:{value:function(e){e&&this.element.setAttribute("role","listbox")}}})}}),montageDefine("1855034","ui/substitution.reel/substitution",{dependencies:["../slot.reel","../../core/promise","../../core/logger"],factory:function(e,t){var n=e("../slot.reel").Slot,i=e("../../core/promise").Promise;e("../../core/logger").logger("substitution"),t.Substitution=n.specialize({hasTemplate:{enumerable:!1,value:!1},constructor:{value:function(){this._switchElements=Object.create(null),this._switchComponentTreeLoaded=Object.create(null)}},_allChildComponents:{value:null},deserializedFromTemplate:{value:function(){this._allChildComponents=this.childComponents.slice(0),this.switchValue&&this._loadSwitchComponentTree(this.switchValue)}},_switchElements:{value:null},_switchComponentTreeLoaded:{value:null},addSwitchElement:{value:function(e,t){if(t.parentNode)throw Error("Can't handle elements inside the DOM.");this._switchElements[e]=t,this._findFringeComponents(t,this._allChildComponents)}},_findFringeComponents:{value:function(e,t){var n;if(t=t||[],e.component)t.push(e.component);else{n=e.children;for(var i,r=0;i=n[r];r++)this._findFringeComponents(i,t)}return t}},_drawnSwitchValue:{value:null},_switchValue:{value:null},switchValue:{get:function(){return this._switchValue},set:function(e){this._switchValue===e||this._isSwitchingContent||(this._switchValue=e,this._firstDraw||this.isDeserializing||this._loadContent(e))}},enterDocument:{value:function(e){var t;if(n.enterDocument.apply(this,arguments),e){t=this.getDomArgumentNames();for(var i,r=0;i=t[r];r++)this._switchElements[i]=this.extractDomArgument(i);this._loadContent(this.switchValue),this._updateComponentDom()}}},_loadContent:{value:function(e){this.content=e===this._drawnSwitchValue?this.element.children[0]:this._switchElements[e]||null,this._switchComponentTreeLoaded[e]||this._loadSwitchComponentTree(e)}},contentDidChange:{value:function(e,t){this.super(),this._drawnSwitchValue&&(this._switchElements[this._drawnSwitchValue]=t),this._drawnSwitchValue=this._switchValue}},_loadSwitchComponentTree:{value:function(e){var t,n,r=this,a=this._allChildComponents,s=this._switchElements[e],o=this.element,l=this.canDrawGate,c=[];s||(s=this._getSubstitutionDomArgument(e));for(var u=0;a.length>u;u++){for(t=a[u],n=t.element;n!==s&&n!==o&&n.parentNode;)n=n.parentNode;n===s&&c.push(t.loadComponentTree())}c.length>0?(l.setField(e+"ComponentTreeLoaded",!1),i.all(c).then(function(){r._switchComponentTreeLoaded[e]=!0,l.setField(e+"ComponentTreeLoaded",!0),r._canDraw=!0,r.needsDraw=!0}).done()):(this._switchComponentTreeLoaded[e]=!0,this.needsDraw=!0)}},_getSubstitutionDomArgument:{value:function(e){var t,n,i,r,a,s,o=this._ownerDocumentPart.template;i=this.element,t=i.querySelectorAll("*["+this.DOM_ARG_ATTRIBUTE+"='"+e+"']");e:for(var l,c=0;l=t[c];c++){for(n=l;(n=n.parentNode)!==i;)if(r=o.getElementId(n),r&&(a=o.getSerialization(),s=a.getSerializationLabelsWithElements(r),s.length>0))continue e;return l}}},shouldLoadComponentTree:{value:!1},transition:{value:null}})}}),montageDefine("579d289","ui/details.reel/details.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=details.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"},"routable":{"@":"routableInfo"}}},"routableInfo":{"prototype":"router[Routable]","properties":{"target":{"@":"owner"}},"bindings":{"state.switch":{"<->":"@panelSwitch.switchValue"}}},"options":{"prototype":"montage/ui/repetition.reel","properties":{"contentController":{"@":"optionsListController"},"element":{"#":"panelsSelects"},"isSelectionEnabled":true}},"optionsListController":{"prototype":"montage/core/range-controller","properties":{"content":["title","author","date"]}},"panelButton":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"panelButton"}},"bindings":{"value":{"<-":"@options:iteration.object"}}},"panelSwitch":{"prototype":"montage/ui/substitution.reel","properties":{"element":{"#":"panels"}},"bindings":{"switchValue":{"<->":"@optionsListController.selection.0"}}},"title":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"title"}},"bindings":{"value":{"<-":"@owner.content.title"}}},"author":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"author"}},"bindings":{"value":{"<-":"@owner.content.author"}}},"date":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"date"},"converter":{"@":"dateConverter"}},"bindings":{"value":{"<-":"@owner.content.created"}}},"dateConverter":{"prototype":"montage/core/converter/date-converter","properties":{"pattern":"HH\\\\hmm:ss, dd MMMM"}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=Details>\n        <div data-montage-id=panelsSelects class=panelHeads>\n            <span data-montage-id=panelButton></span>\n        </div>\n        <div data-montage-id=panels class=panels>\n            <div data-arg=title data-montage-id=title>\n            </div>\n            <div data-arg=author data-montage-id=author>\n            </div>\n            <div data-arg=date data-montage-id=date>\n            </div>        \n        </div>\n    </div>\n\n\n</body></html>'}),montageDefine("579d289","ui/list.reel/list.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=list.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"owner"},"routable":{"@":"routableInfo"}},"bindings":{"selected":{"<->":"@listing.contentController.selection.0"},"selectedIndex":{"<-":"@listing.selectedIndexes.0"}}},"routableInfo":{"prototype":"router[Routable]","properties":{"target":{"@":"owner"}},"bindings":{"state.selectedIndex":{"<->":"@owner.selectedIndex"}}},"listing":{"prototype":"montage/ui/repetition.reel","properties":{"element":{"#":"listing"},"isSelectionEnabled":true},"bindings":{"content":{"<-":"@owner.content"},"contentController.selection.0":{"<-":"content.get(@owner.selectedIndex)"}}},"title":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"title"}},"bindings":{"value":{"<-":"@listing:iteration.object.title"}}}}</script>\n</head>\n<body>\n    <div data-montage-id=owner class=List>\n        <div data-montage-id=listing>\n            <div data-montage-id=title></div>\n        </div>\n    </div>\n\n\n</body></html>'}),montageDefine("1855034","ui/slot.reel/slot",{dependencies:["../component"],factory:function(e,t){var n=e("../component").Component;t.Slot=n.specialize({hasTemplate:{enumerable:!1,value:!1},constructor:{value:function(){this.super(),this.content=null}},delegate:{value:null},_content:{value:null},enterDocument:{value:function(e){e&&this.element.classList.add("montage-Slot")}},content:{get:function(){return this._content},set:function(e){var t,i;e&&void 0!==e.needsDraw?(i=this._content,i&&void 0!==i.needsDraw&&i.detachFromParentComponent(),e.element?t=e.element:(t=document.createElement("div"),t.id="appendDiv",this.delegate&&"function"==typeof this.delegate.slotElementForComponent&&(t=this.delegate.slotElementForComponent(this,e,t)),e.element=t),Object.getPropertyDescriptor(n,"domContent").set.call(this,t),this.addChildComponent(e),e.needsDraw=!0):Object.getPropertyDescriptor(n,"domContent").set.call(this,e),this._content=e,this.needsDraw=!0}},contentDidChange:{value:function(e,t){this.delegate&&"function"==typeof this.delegate.slotDidSwitchContent&&this.delegate.slotDidSwitchContent(this,e,e?e.component:null,t,t?t.component:null)}}})}}),montageDefine("194adac","package.json",{exports:{name:"digit",version:"0.5.1",repository:{type:"git",url:"https://github.com/montagejs/digit.git"},dependencies:{montage:"~0.14.0",matte:"~0.2.0"},devDependencies:{"montage-testing":"~0.4.0"},exclude:["overview.html","overview","run-tests.html","test"],description:"![digit](overview/assets/images/icon.png)",bugs:{url:"https://github.com/montagejs/digit/issues"},_id:"digit@0.5.1",dist:{shasum:"17ecd53d240ea66fc514e67b7ff2ac14e44ee8a4",tarball:"http://registry.npmjs.org/digit/-/digit-0.5.1.tgz"},_from:"digit@~0.5.0",_npmVersion:"1.3.11",_npmUser:{name:"montage-bot",email:"francoisfrisch@gmail.com"},maintainers:[{name:"francoisfrisch",email:"francoisfrisch@gmail.com"},{name:"montage-bot",email:"francoisfrisch@gmail.com"}],directories:{},_shasum:"17ecd53d240ea66fc514e67b7ff2ac14e44ee8a4",_resolved:"https://registry.npmjs.org/digit/-/digit-0.5.1.tgz",homepage:"https://github.com/montagejs/digit",hash:"194adac",mappings:{montage:{name:"montage",hash:"1855034",location:"../montage@1855034/"},matte:{name:"matte",hash:"6a63091",location:"../matte@6a63091/"}},production:!0,useScriptInjection:!0}}),montageDefine("1855034","composer/composer",{dependencies:["../core/target"],factory:function(e,t){var n=e("../core/target").Target;t.Composer=n.specialize({_component:{value:null},component:{get:function(){return this._component},set:function(e){this._component=e}},_element:{value:null},element:{get:function(){return this._element},set:function(e){this._element=e}},lazyLoad:{value:!0},_needsFrame:{value:!1},needsFrame:{set:function(e){this._needsFrame!==e&&(this._needsFrame=e,this._component&&e&&this._component.scheduleComposer(this))},get:function(){return this._needsFrame}},frame:{value:Function.noop},_resolveDefaults:{value:function(){this.element||null!=this.element||null==this.component||(this.element=this.component.element)}},_isLoaded:{value:!1},isLoaded:{get:function(){return this._isLoaded}},load:{value:Function.noop},unload:{value:Function.noop},deserializedFromTemplate:{value:function(){this.component&&this.component.addComposer(this)}}},{isCoordinateOutsideRadius:{value:function(e,t,n){return e*e+t*t>n*n}}})}}),montageDefine("194adac","ui/select.reel/select",{dependencies:["montage/ui/base/abstract-select"],factory:function(e,t){var n=e("montage/ui/base/abstract-select").AbstractSelect;t.Select=n.specialize({constructor:{value:function(){this.super(),this.classList.add("digit-Select")}},enterDocument:{value:function(e){this.super(e),this.element.addEventListener("change",this,!1)}},handleChange:{value:function(){var e=this.contentController.organizedContent,t=this.element.selectedIndex;this.value=e[t]}},draw:{value:function(){var e,t=this.contentController.organizedContent;this._contentIsDirty&&(this.drawOptions(),this._contentIsDirty=!1),e=t.indexOf(this.value),-1==e&&(e=0),this.element.selectedIndex=e}},drawOptions:{value:function(){for(var e,t,n=this.contentController.organizedContent,i=document.createDocumentFragment(),r=0,a=n.length;a>r;r++)e=document.createElement("option"),t=n[r],e.textContent=t&&t[this.labelPropertyName],i.appendChild(e);this.element.innerHTML="",this.element.appendChild(i)}}})}}),montageDefine("1855034","ui/text.reel/text",{dependencies:["../component"],factory:function(e,t){var n=e("../component").Component;t.Text=n.specialize({constructor:{value:function(){this.super()}},hasTemplate:{value:!1},_value:{value:null},value:{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,this.needsDraw=!0)}},converter:{value:null},defaultValue:{value:""},_valueNode:{value:null},_RANGE:{value:document.createRange()},enterDocument:{value:function(e){if(e){var t=this._RANGE;t.selectNodeContents(this.element),t.deleteContents(),this._valueNode=document.createTextNode(""),t.insertNode(this._valueNode),this.element.classList.add("montage-Text")}}},draw:{value:function(){var e=this._value,t=e||0===e?e:this.defaultValue;this.converter&&(t=this.converter.convert(t)),this._valueNode.data=t}}})}}),montageDefine("1855034","core/browser",{dependencies:["montage"],factory:function(e,t){var n=e("montage").Montage,i=RegExp(/AppleWebKit\/([\d.]+)/),r=n.specialize({constructor:{value:function r(e){this.super(),this._userAgent=e,this._analyze(e)}},_analyze:{value:function(e){if(e.indexOf("Android")>-1&&e.indexOf("Mozilla/5.0")>-1&&e.indexOf("AppleWebKit")>-1){this.android={};var t=i.exec(e),n=null===t?null:parseFloat(i.exec(e)[1]);this.android.androidBrowser=null!==n&&537>n}}},_userAgent:{value:null}}),a=null;n.defineProperties(t,{browser:{get:function(){return null===a&&(a=new r(navigator.userAgent)),a}},Browser:{value:r}})}}),montageDefine("579d289","ui/version.reel/version.html",{text:'<!DOCTYPE html><html><head>\n    <title></title>\n    <link rel=stylesheet type=text/css href=version.css>\n    <script type=text/montage-serialization>{"owner":{"properties":{"element":{"#":"version"}}},"montageVersion":{"prototype":"montage/ui/text.reel","properties":{"element":{"#":"montageVersion"}},"bindings":{"value":{"<-":"@owner.montageDescription.version"}}}}</script>\n</head>\n<body>\n    <footer data-montage-id=version class=Version>Montage version: <span data-montage-id=montageVersion></span></footer>\n\n\n</body></html>'}),montageDefine("1855034","core/converter/converter",{dependencies:["../core"],factory:function(e,t){var n=e("../core").Montage,i="[object Number]",r=Object.prototype.toString,a=function(e){return r.call(e)===i};t.isNumber=a;var s=function(e){return e&&void 0!==e};t.isDef=s,t.Validator=n.specialize({validate:{value:null}}),t.Converter=n.specialize({allowPartialConversion:{value:!0},convert:{enumerable:!1,value:null},revert:{enumerable:!1,value:null}},{blueprintModuleId:e("../core")._blueprintModuleIdDescriptor,blueprint:e("../core")._blueprintDescriptor})}}),montageDefine("1855034","ui/base/abstract-control",{dependencies:["../component","collections/dict"],factory:function(e,t){var n=e("../component").Component,i=e("collections/dict");t.AbstractControl=n.specialize({dispatchActionEvent:{value:function(){return this.dispatchEvent(this.createActionEvent())}},_detail:{value:null},detail:{get:function(){return null==this._detail&&(this._detail=new i),this._detail}},createActionEvent:{value:function(){var e,t=document.createEvent("CustomEvent");return e=this._detail,t.initCustomEvent("action",!0,!0,e),t}}})}}),montageDefine("579d289","ui/main.reel/main",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Main=n.specialize({constructor:{value:function(){this.super()}},selectedContent:{value:0},enterDocument:{value:function(e){e&&(this.contents=this.jsonContents.map(function(e){return JSON.parse(e.innerHTML)}))}}})}}),montageDefine("579d289","ui/version.reel/version",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Version=n.specialize({constructor:{value:function(){this.super()}},montageDescription:{get:function(){return("undefined"!=typeof montageRequire?montageRequire:mr).packageDescription}}})}}),montageDefine("579d289","ui/list.reel/list",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.List=n.specialize({constructor:{value:function(){this.super()}},enterDocument:{value:function(){}}})}}),montageDefine("579d289","ui/details.reel/details",{dependencies:["montage/ui/component"],factory:function(e,t){var n=e("montage/ui/component").Component;t.Details=n.specialize({constructor:{value:function(){this.super()}}})}}),montageDefine("194adac","ui/select.reel/select.html",{text:"<!DOCTYPE html><html><head>\n    <meta charset=utf-8>\n    <link rel=stylesheet href=select.css>\n</head>\n<body>\n\n\n</body></html>"});
bundleLoaded("index.html.bundle-1-0.js")